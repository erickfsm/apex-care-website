<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Perfil - Apex Care</title>
    <!-- CSS -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/style-improvements.css">
    <link rel="stylesheet" href="css/auth.css">
    <link rel="stylesheet" href="css/config-perfil.css">
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body>

    <!-- Header -->
    <header class="main-header scrolled">
        <nav class="main-nav">
            <a href="portal-cliente.html" class="logo">
                <img src="assets/images/logo-apex-care.svg" alt="Logo Apex Care">
            </a>
            <ul>
                <li><a href="portal-cliente.html">‚Üê Voltar ao Portal</a></li>
            </ul>
            <div id="auth-container-header" class="auth-container-header"></div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="perfil-main">
        <div class="container perfil-container">

            <div class="perfil-header">
                <h1>‚öôÔ∏è Configura√ß√µes do Perfil</h1>
                <p>Gerencie suas informa√ß√µes pessoais</p>
            </div>

            <div id="success-msg" class="feedback-message success-message" role="alert"></div>
            <div id="error-msg" class="feedback-message error-message" role="alert"></div>

            <div class="perfil-card">
                <nav class="tabs-nav" role="tablist">
                    <button type="button" class="tab-btn active" data-tab-target="personal" role="tab" aria-selected="true">üë§ Dados pessoais</button>
                    <button type="button" class="tab-btn" data-tab-target="addresses" role="tab" aria-selected="false">üè† Endere√ßos</button>
                    <button type="button" class="tab-btn" data-tab-target="password" role="tab" aria-selected="false">üîê Alterar senha</button>
                    <button type="button" class="tab-btn" data-tab-target="danger" role="tab" aria-selected="false">‚ö†Ô∏è Excluir conta</button>
                </nav>

                <section class="tab-panel active" data-tab="personal" role="tabpanel">
                    <h2 class="section-heading"><span>üë§</span>Dados pessoais</h2>
                    <form id="perfil-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="nome">Nome completo</label>
                                <input type="text" id="nome" name="nome" autocomplete="name" required>
                            </div>
                            <div class="form-group">
                                <label for="whatsapp">WhatsApp</label>
                                <input type="tel" id="whatsapp" name="whatsapp" placeholder="(31) 99999-9999" autocomplete="tel" required>
                            </div>
                            <div class="form-group">
                                <label for="email">E-mail</label>
                                <input type="email" id="email" name="email" autocomplete="email" disabled>
                                <small>O e-mail n√£o pode ser alterado.</small>
                            </div>
                            <div class="form-group">
                                <label for="perfil-cep">CEP</label>
                                <input type="text" id="perfil-cep" name="cep" inputmode="numeric" maxlength="9" autocomplete="postal-code">
                            </div>
                            <div class="form-group">
                                <label for="perfil-rua">Rua</label>
                                <input type="text" id="perfil-rua" name="rua" autocomplete="address-line1">
                            </div>
                            <div class="form-group">
                                <label for="perfil-numero">N√∫mero</label>
                                <input type="text" id="perfil-numero" name="numero" autocomplete="address-line2">
                            </div>
                            <div class="form-group">
                                <label for="perfil-complemento">Complemento</label>
                                <input type="text" id="perfil-complemento" name="complemento" autocomplete="address-line2">
                            </div>
                            <div class="form-group">
                                <label for="perfil-bairro">Bairro</label>
                                <input type="text" id="perfil-bairro" name="bairro" autocomplete="address-level3">
                            </div>
                            <div class="form-group">
                                <label for="perfil-cidade">Cidade</label>
                                <input type="text" id="perfil-cidade" name="cidade" autocomplete="address-level2">
                            </div>
                            <div class="form-group">
                                <label for="perfil-estado">Estado</label>
                                <input type="text" id="perfil-estado" name="estado" maxlength="2" autocomplete="address-level1">
                            </div>
                        </div>
                        <div class="btn-row">
                            <button type="button" class="btn btn-secondary" id="perfil-cancelar-btn">Cancelar</button>
                            <button type="submit" class="btn btn-primary">üíæ Salvar altera√ß√µes</button>
                        </div>
                    </form>
                </section>

                <section class="tab-panel" data-tab="addresses" role="tabpanel" aria-hidden="true">
                    <h2 class="section-heading"><span>üè†</span>Endere√ßos</h2>
                    <div class="note-box">
                        Clique em um endere√ßo para defini-lo como principal. Voc√™ pode adicionar apelidos para identificar cada local facilmente.
                    </div>
                    <div class="addresses-header">
                        <p class="addresses-info">Gerencie os locais onde nossos servi√ßos ser√£o realizados.</p>
                        <button type="button" class="btn btn-primary" id="add-address-btn">‚ûï Novo endere√ßo</button>
                    </div>
                    <div id="addresses-list" class="addresses-list"></div>
                    <form id="address-form" class="address-form hidden">
                        <h3 class="section-heading"><span>üìù</span><span id="address-form-title">Novo endere√ßo</span></h3>
                        <input type="hidden" id="address-id">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="address-nome">Nome do endere√ßo</label>
                                <input type="text" id="address-nome" name="nome_endereco" placeholder="Ex.: Casa, Trabalho" required>
                            </div>
                            <div class="form-group">
                                <label for="address-tipo">Tipo do im√≥vel</label>
                                <select id="address-tipo" name="tipo_imovel" required>
                                    <option value="residencial">Residencial</option>
                                    <option value="comercial">Comercial</option>
                                    <option value="condominio">Condom√≠nio</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="address-cep">CEP</label>
                                <input type="text" id="address-cep" name="cep" inputmode="numeric" maxlength="9" required>
                            </div>
                            <div class="form-group">
                                <label for="address-rua">Rua</label>
                                <input type="text" id="address-rua" name="rua" required>
                            </div>
                            <div class="form-group">
                                <label for="address-numero">N√∫mero</label>
                                <input type="text" id="address-numero" name="numero" required>
                            </div>
                            <div class="form-group">
                                <label for="address-complemento">Complemento</label>
                                <input type="text" id="address-complemento" name="complemento">
                            </div>
                            <div class="form-group">
                                <label for="address-bairro">Bairro</label>
                                <input type="text" id="address-bairro" name="bairro" required>
                            </div>
                            <div class="form-group">
                                <label for="address-cidade">Cidade</label>
                                <input type="text" id="address-cidade" name="cidade" required>
                            </div>
                            <div class="form-group">
                                <label for="address-estado">Estado</label>
                                <input type="text" id="address-estado" name="estado" maxlength="2" required>
                            </div>
                        </div>
                        <div class="address-form-actions">
                            <button type="button" class="btn btn-secondary" id="cancel-address-btn">Cancelar</button>
                            <button type="submit" class="btn btn-primary">Salvar endere√ßo</button>
                        </div>
                    </form>
                </section>

                <section class="tab-panel" data-tab="password" role="tabpanel" aria-hidden="true">
                    <h2 class="section-heading"><span>üîê</span>Alterar senha</h2>
                    <div class="note-box">
                        Ap√≥s confirmar a nova senha, voc√™ ser√° desconectado por seguran√ßa e precisar√° entrar novamente.
                    </div>
                    <form id="senha-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="senha-atual">Senha atual</label>
                                <input type="password" id="senha-atual" name="senha_atual" minlength="6" autocomplete="current-password" required>
                            </div>
                            <div class="form-group">
                                <label for="senha-nova">Nova senha</label>
                                <input type="password" id="senha-nova" name="senha_nova" minlength="6" autocomplete="new-password" required>
                            </div>
                            <div class="form-group">
                                <label for="senha-confirma">Confirmar nova senha</label>
                                <input type="password" id="senha-confirma" name="senha_confirma" minlength="6" autocomplete="new-password" required>
                            </div>
                        </div>
                        <div class="btn-row">
                            <button type="submit" class="btn btn-primary">üîë Alterar senha</button>
                        </div>
                    </form>
                </section>

                <section class="tab-panel" data-tab="danger" role="tabpanel" aria-hidden="true">
                    <h2 class="section-heading"><span>‚ö†Ô∏è</span>Excluir conta</h2>
                    <div class="danger-panel">
                        <h3>Zona de perigo</h3>
                        <p>Esta a√ß√£o √© permanente e remover√° todos os seus dados do Apex Care, incluindo agendamentos e endere√ßos cadastrados.</p>
                        <p>Caso exista algum agendamento com status pendente ou ativo, a exclus√£o n√£o ser√° permitida.</p>
                        <button type="button" class="btn btn-danger" id="delete-account-btn">üóëÔ∏è Excluir minha conta</button>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="main-footer">
        <div class="container footer-grid">
            <div class="footer-col">
                <img src="assets/images/logo-apex-care-white.svg" alt="Logo Apex Care" class="footer-logo">
                <p>Performance que traz tranquilidade.</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Apex Care. Todos os direitos reservados.</p>
        </div>
    </footer>

    <!-- Scripts -->
    <script type="module" src="js/config-perfil.js"></script>
    <script type="module" src="js/shared-improved.js"></script>

</body>
</html>
